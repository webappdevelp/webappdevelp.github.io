<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
<meta property="og:type" content="website">
<meta property="og:title" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
<meta property="og:description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
<meta name="twitter:description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">






  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>ğŸˆçŒ«è¢«è°ƒæˆäº†</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ğŸˆçŒ«è¢«è°ƒæˆäº†</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />é¦–é¡µ</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />å½’æ¡£</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/mermaid-class-diagram/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/mermaid-class-diagram/" itemprop="url">
                  mermaid class diagram
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-07-20 22:46:09 / ä¿®æ”¹æ—¶é—´ï¼š22:48:11" itemprop="dateCreated datePublished" datetime="2018-07-20T22:46:09+08:00">2018-07-20</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å•¥å«Reduxï¼Ÿå®˜æ–¹è¯´ï¼šReduxæ˜¯javascriptçš„çŠ¶æ€ç®¡ç†å®¹å™¨ã€‚ä¸ªäººç†è§£å°±æ˜¯å®ƒæ˜¯åšjsæ•°æ®ç®¡ç†çš„ï¼Œå®ƒå¯ä»¥è®©æ•°æ®æ²¿ç€ä¸€ä¸ªæ–¹å‘è¿›å…¥ä¸­å¿ƒï¼Œç„¶åç»è¿‡ä¸­å¿ƒå¤„ç†ååˆæ²¿ç€å¦ä¸€ä¸ªæ–¹å‘è¿”å›ã€‚ç¤ºæ„å›¾å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre class="mermaid">graph LR
A(page component) -- dispatch --> B(action)
B --> C{Reducer}
C --> D((Store))
D -- state --> A</pre>

<p>æ ¹æ®å›¾ç¤ºå¯ä»¥çœ‹åˆ°ï¼ŒReduxä¸‰ä¸ªé‡è¦çš„å†…å®¹ï¼š</p>
<ul>
<li>action</li>
<li>reducer</li>
<li>store</li>
</ul>
<p>åœ¨å¼€å§‹ä¹‹å‰æœ‰å¿…è¦å»å®˜æ–¹æ–‡æ¡£çœ‹å“ˆå­â€“&gt;<a href="http://www.redux.org.cn/">Reduxä¸­æ–‡ç‰ˆ</a>ã€<a href="https://redux.js.org/">å®˜æ–¹è‹±æ–‡ç‰ˆ</a>ã€‚</p>
<pre class="mermaid">classDiagram
Class01 <|-- AveryLongClass : Cool
Class03 *-- Class04
Class05 o-- Class06
Class07 .. Class08
Class09 --> C2 : Where am i?
Class09 --* C3
Class09 --|> Class07
Class07 : equals()
Class07 : Object[] elementData
Class01 : size()
Class01 : int chimp
Class01 : int gorilla
Class08 <--> C2: Cool label</pre>

<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>reacté¡¹ç›®é‡Œé¢ä½¿ç”¨reduxéœ€è¦ç”¨åˆ°react-reduxï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†componentä¸storeç›¸å…³è”ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡dispatchè¾¾åˆ°ä¿®æ”¹stateçš„ç›®çš„ã€‚<br>å…ˆæ¥å®‰è£…reduxç›¸å…³çš„ä¾èµ–åŒ…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add redux react-redux</span><br></pre></td></tr></table></figure></p>
<p>å®‰è£…å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬å°±è¦è§„åˆ’actionã€reducerå’Œstoreçš„ç®¡ç†ã€‚æ‰€ä»¥ï¼Œæˆ‘åœ¨é¡¹ç›®ç›®å½•<strong>src/</strong>ä¸‹é¢å»ºäº†ä¸ª<strong>redux</strong>ç›®å½•ï¼Œç„¶ååˆ†åˆ«å»ºäº†<strong>actions</strong>ã€<strong>reducers</strong>å’Œ<strong>store</strong>ç›®å½•ã€‚</p>
<h3 id="åˆ›å»ºAction"><a href="#åˆ›å»ºAction" class="headerlink" title="åˆ›å»ºAction"></a>åˆ›å»ºAction</h3><p>åœ¨actionsç›®å½•ä¸‹é¢æˆ‘ä»¬å»ºä¸€ä¸ª<strong>home.js</strong>ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> HOME_INDEX = <span class="string">'HOME_INDEX'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getHomeIndexData = <span class="function"><span class="params">params</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: HOME_INDEX,</span><br><span class="line">    data: &#123; ...params &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="åˆ›å»ºReducer"><a href="#åˆ›å»ºReducer" class="headerlink" title="åˆ›å»ºReducer"></a>åˆ›å»ºReducer</h3><p>åœ¨reducersç›®å½•ä¸‹é¢æ–°å»º<strong>home.js</strong>ï¼Œç„¶åå¼•å…¥homeçš„actionï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; HOME_INDEX &#125; <span class="keyword">from</span> <span class="string">'../actions/home'</span>;</span><br><span class="line"><span class="keyword">let</span> initState = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> HomeReducer = <span class="function">(<span class="params">state = initState, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">  <span class="keyword">case</span> HOME_INDEX:</span><br><span class="line">    <span class="keyword">return</span> &#123; ...state, ...action.data &#125;;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> HomeReducer;</span><br></pre></td></tr></table></figure></p>
<h3 id="åˆ›å»ºStore"><a href="#åˆ›å»ºStore" class="headerlink" title="åˆ›å»ºStore"></a>åˆ›å»ºStore</h3><p>åœ¨storeç›®å½•ä¸‹é¢æ–°å»º<strong>index.js</strong>ï¼Œç„¶åå°†homeçš„reducerå¼•å…¥åˆ°storeï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> HomeReducer <span class="keyword">from</span> <span class="string">'../reducers/home'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Store = createStore(HomeReducer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Store;</span><br></pre></td></tr></table></figure></p>
<p>ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå¼•å…¥äº†reduxçš„createStoreæ–¹æ³•å°†æ‰€æœ‰çš„reduceréƒ½ä¸¢ç»™äº†reduxå¤„ç†ã€‚</p>
<h3 id="ä¿®æ”¹APP"><a href="#ä¿®æ”¹APP" class="headerlink" title="ä¿®æ”¹APP"></a>ä¿®æ”¹APP</h3><p>æ‰“å¼€app.jsï¼Œç„¶åæŠŠstoreä¼ å…¥è¿›æ¥ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> Routes <span class="keyword">from</span> <span class="string">'./routes'</span>;</span><br><span class="line"><span class="keyword">import</span> Store <span class="keyword">from</span> <span class="string">'./redux/store'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Provider store=&#123;Store&#125;&gt;</span><br><span class="line">        &#123;Routes&#125;</span><br><span class="line">      &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure></p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å°†reduceræ‰”ç»™äº†reduxï¼Œä¹Ÿå°†storeå›ä¼ ç»™äº†appã€‚é‚£ä¹ˆæˆ‘ä»¬çš„ç»„ä»¶è¦æ€ä¹ˆæ¥æ”¶storeï¼Œå’Œå‘reducerå¹¿æ’­å†…å®¹å‘¢ï¼Ÿä¸‹é¢å°±éœ€è¦ä¿®æ”¹é¡µé¢ç»„ä»¶äº†ã€‚</p>
<h3 id="ä¿®æ”¹Home-page"><a href="#ä¿®æ”¹Home-page" class="headerlink" title="ä¿®æ”¹Home page"></a>ä¿®æ”¹Home page</h3><p>æ‰“å¼€views/home/index.jsï¼Œç„¶åå¼•å…¥<strong>connect</strong>ï¼Œå¹¶è®¾ç½®stateçš„æå–åŠæ¥æ”¶dispatchçš„æ–¹æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getHomeIndexData &#125; <span class="keyword">from</span> <span class="string">'../../redux/actions/home'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.less'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Home</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.props.getInit(&#123;</span><br><span class="line">      info: <span class="string">'é¦–é¡µå†…å®¹'</span>,</span><br><span class="line">      title: <span class="string">'é¦–é¡µ'</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"home"</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">"home-text"</span>&gt;&#123;<span class="keyword">this</span>.props.info&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Home.propTypes = &#123;</span><br><span class="line">  info: PropTypes.string.isRequired,</span><br><span class="line">  getInit: PropTypes.func.isRequired,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">&#123; home &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; ...home &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> (&#123;</span><br><span class="line">  getInit: <span class="function"><span class="params">params</span> =&gt;</span> &#123;</span><br><span class="line">    dispatch(getHomeIndexData(params));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(Home);</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œéœ€è¦ç†è§£ä¸€ä¸‹ï¼šstateå’Œdispatchæ˜¯åŒæ—¶éƒ½ä¼šåœ¨ç»„ä»¶çš„propsé‡Œé¢çš„ã€‚</p>
<h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p>åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„reduxå°±å·²ç»åœ¨é¡¹ç›®é‡Œé¢æ¥å¥½äº†ï¼Œä½¿ç”¨<code>yarn start</code>å¯åŠ¨ä¸‹çœ‹çœ‹Homeæ˜¯ä¸æ˜¯å·²ç»æˆåŠŸæ¥æ”¶åˆ°äº†ç»è¿‡reduxå¤„ç†è¿‡çš„stateã€‚</p>
<p><a href="https://github.com/gaearon/redux-devtools">Redux-DevTools</a>å·¥å…·å¯ä»¥è®©ä½ æ›´ç›´è§‚çš„æŸ¥çœ‹stateç»è¿‡reduxçš„å˜åŒ–ã€‚</p>
<blockquote>
<p>Reduxå¹¶éå¿…éœ€ä½¿ç”¨ï¼Œè¿™ä¸ªå¾—çœ‹ä½ é¡¹ç›®çš„æ•°æ®å¤æ‚ç¨‹åº¦ã€‚å‡å¦‚åªæ˜¯ä¸ªå°é¡¹ç›®ï¼Œè¯·æ±‚å°‘ï¼Œæ•°æ®å¤„ç†é‡ä¸å¤šçš„æƒ…å†µä¸‹ï¼Œä¸ä½¿ç”¨Reduxè¿˜èƒ½é™ä½é¡¹ç›®æ–‡ä»¶çš„ä½“ç§¯ã€‚</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/å¾®ä¿¡å°ç¨‹åºcanvasåˆ©ç”¨ç½‘ç»œå›¾ç‰‡ç”»å›¾ä¹‹å‘/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/å¾®ä¿¡å°ç¨‹åºcanvasåˆ©ç”¨ç½‘ç»œå›¾ç‰‡ç”»å›¾ä¹‹å‘/" itemprop="url">
                  å¾®ä¿¡å°ç¨‹åºcanvasåˆ©ç”¨ç½‘ç»œå›¾ç‰‡ç”»å›¾ä¹‹å‘
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-07-01 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š17:13:19" itemprop="dateCreated datePublished" datetime="2018-07-01T00:00:00+08:00">2018-07-01</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å‰ç«¯/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p> åªè¦æ˜¯ä¸€å¼ å¯ä»¥æ­£å¸¸æŸ¥çœ‹çš„å›¾ç‰‡ï¼Œä¸€èˆ¬è€è¯´é€šè¿‡ canvas å°±å¯ä»¥å°†è¿™ä¸ªå›¾ç‰‡ç›´æ¥ç»˜åˆ¶å‡ºæ¥ã€‚ä½†æ˜¯åœ¨å¾®ä¿¡å°ç¨‹åºé‡Œé¢canvas æœ‰ä¸€ä¸ªå‘å°±æ˜¯ä¸èƒ½å¤Ÿç›´æ¥åˆ©ç”¨ç½‘ç»œå›¾ç‰‡è¿›è¡Œç»˜åˆ¶ã€‚è¿™åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ¨¡æ‹Ÿæ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯åœ¨æ‰‹æœºç«¯åˆ™æ˜¾å¾—åŠ›ä¸ä»å¿ƒäº† â€” ç”»ä¸å‡ºæ¥å•Šï¼ï¼ï¼</p>
<p> ä¸è¿‡ï¼Œå¹¶ä¸æ˜¯æ²¡æœ‰è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡ä½¿ç”¨ wx.getImageInfo çš„æ–¹å¼å¯ä»¥å°†ç½‘ç»œå›¾ç‰‡ç¼“å­˜ä¸‹æ¥ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨ç¼“å­˜çš„å›¾ç‰‡åœ°å€æ¥è¿›è¡Œç”»å›¾ã€‚æ•ˆæœæ˜¯ç›¸å½“çš„æ¼‚äº®äº†ã€‚</p>
<p> ä¸‹é¢æ¥å®ç°ä¸€ä¸ªå°ç¨‹åºç”»å›¾å¹¶ä¿å­˜çš„åŠŸèƒ½ï¼š</p>
<h4 id="åˆ›å»ºç”»å¸ƒ"><a href="#åˆ›å»ºç”»å¸ƒ" class="headerlink" title="åˆ›å»ºç”»å¸ƒ"></a>åˆ›å»ºç”»å¸ƒ</h4> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">canvas-id</span>=<span class="string">"huahua"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="è·å–ç½‘ç»œå›¾ç‰‡å¹¶ç¼“å­˜"><a href="#è·å–ç½‘ç»œå›¾ç‰‡å¹¶ç¼“å­˜" class="headerlink" title="è·å–ç½‘ç»œå›¾ç‰‡å¹¶ç¼“å­˜"></a>è·å–ç½‘ç»œå›¾ç‰‡å¹¶ç¼“å­˜</h4> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wx.getImageInfo(&#123;</span><br><span class="line">  src: <span class="string">'https://xxxx.png'</span>,</span><br><span class="line">  success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    wx.setStorageSync(<span class="string">'pic'</span>, &#123;</span><br><span class="line">      path: res.path,</span><br><span class="line">      width: res.width,</span><br><span class="line">      height: res.height</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="ç»˜åˆ¶å›¾ç‰‡"><a href="#ç»˜åˆ¶å›¾ç‰‡" class="headerlink" title="ç»˜åˆ¶å›¾ç‰‡"></a>ç»˜åˆ¶å›¾ç‰‡</h4> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> picObj = wx.getStorageSync(<span class="string">'pic'</span>);</span><br><span class="line"><span class="keyword">if</span> (picObj &amp;&amp; picObj.path) &#123;</span><br><span class="line">  <span class="keyword">let</span> ctx = wx.createCanvasContext(<span class="string">'2d'</span>);</span><br><span class="line">  ctx.drawImage(picObj.path, <span class="number">0</span>, <span class="number">0</span>, picObj.width, picObj.height);</span><br><span class="line">  ctx.draw(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¿å­˜å›¾ç‰‡"><a href="#ä¿å­˜å›¾ç‰‡" class="headerlink" title="ä¿å­˜å›¾ç‰‡"></a>ä¿å­˜å›¾ç‰‡</h4>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">wx.canvasToTempFilePath(&#123;</span><br><span class="line">  canvasId: <span class="string">'huahua'</span>,</span><br><span class="line">  success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    wx.saveImageToPhotosAlbum(&#123;</span><br><span class="line">      filePath: res.tempFilePath,</span><br><span class="line">      success: <span class="function"><span class="params">info</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(info);</span><br><span class="line">      &#125;,</span><br><span class="line">      fail: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  fail: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>base64ä½çš„å›¾ç‰‡åœ¨æ¨¡æ‹Ÿå™¨ä¸Šä¹Ÿæ˜¯å¯ä»¥ç”»å‡ºæ¥çš„ï¼Œä½†æ˜¯åœ¨çœŸæœºä¸Šç”»ä¸å‡ºæ¥ï¼Œå¯ä»¥å°† base64ä½æ¢æˆç½‘ç»œ url å½¢å¼çš„å›¾ç‰‡å†è¿›è¡Œæ“ä½œã€‚</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/Centos-6è™šæ‹Ÿæœºå®‰è£…Nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/Centos-6è™šæ‹Ÿæœºå®‰è£…Nginx/" itemprop="url">
                  Centos 6è™šæ‹Ÿæœºå®‰è£…Nginx
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-06-12 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š19:40:27" itemprop="dateCreated datePublished" datetime="2018-06-12T00:00:00+08:00">2018-06-12</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/åç«¯/" itemprop="url" rel="index"><span itemprop="name">åç«¯</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ˜¨å¤©å·²ç»æŠŠè™šæ‹Ÿæœºå®‰è£…å¥½äº†ï¼Œç°åœ¨æ¥ç»™è™šæ‹Ÿæœºé…ç½®æœåŠ¡å™¨ç¯å¢ƒã€‚é¦–å…ˆæ¥å®‰è£…Nginxå§ï¼š</p>
<h4 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h4><p>ä½¿ç”¨rootè´¦å·ç™»å½•è™šæ‹Ÿæœºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[vagrant@centos6]:# su</span><br><span class="line">å¯†ç ï¼š</span><br><span class="line">[root@centos6]:#</span><br></pre></td></tr></table></figure></p>
<h4 id="å®‰è£…-amp-ç¼–è¯‘"><a href="#å®‰è£…-amp-ç¼–è¯‘" class="headerlink" title="å®‰è£…&amp;ç¼–è¯‘"></a>å®‰è£…&amp;ç¼–è¯‘</h4><p>å…ˆå®‰è£…ä¸¤ä¸ªåº“ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos6]:# yum -y install openssl openssl-devel</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åä¸‹è½½NginxåŒ…å¹¶ç¼–è¯‘ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@centos6]:# cd /usr/local/</span><br><span class="line">[root@centos6]:# wget http://nginx.org/download/nginx-1.14.0.tar.gz</span><br><span class="line">[root@centos6]:# tar -zvxf nginx-1.14.0.tar.gz</span><br><span class="line">[root@centos6]:# cd ./nginx-1.8.0</span><br><span class="line">[root@centos6]:# ./configure --prefix=/usr/local/nginx</span><br><span class="line">[root@centos6]:# make</span><br><span class="line">[root@centos6]:# make install</span><br></pre></td></tr></table></figure></p>
<p>å¥½äº†ï¼Œç„¶åä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹Nginxè¿›ç¨‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos6]:# ps aux | grep nginx</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœç°å®æœ‰ï¼Œè¯´æ˜Nginxå·²ç»å®‰è£…å¹¶å¯åŠ¨äº†ã€‚</p>
<h4 id="æœ¬æœºè®¿é—®Nginxæ¬¢è¿é¡µ"><a href="#æœ¬æœºè®¿é—®Nginxæ¬¢è¿é¡µ" class="headerlink" title="æœ¬æœºè®¿é—®Nginxæ¬¢è¿é¡µ"></a>æœ¬æœºè®¿é—®Nginxæ¬¢è¿é¡µ</h4><p>å½“Nginxå¼„å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬æœºä¸Šè®¿é—® <code>127.0.0.1</code> æ¥æŸ¥çœ‹Nginxçš„æ¬¢è¿é¡µã€‚å¦‚æœæ­£å¸¸è®¿é—®ï¼Œé‚£è¯´æ˜Nginxæˆ‘ä»¬å·²ç»å¼„å¥½äº†ã€‚<br>å¦‚æœè®¿é—®ä¸äº†ï¼Œåˆ™éœ€è¦çœ‹ä¸‹ä½ æœ¬æœºå’Œè™šæ‹Ÿæœºçš„é€šä¿¡è¿æ¥æ–¹å¼æ˜¯æ€æ ·çš„ï¼š<br>æŸ¥çœ‹ä¸‹Vagrantæ–‡ä»¶çš„<code>config.vm.network</code>é…ç½®é¡¹ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯<code>config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;</code>ã€‚æ‰€ä»¥æœ¬åœ°æµè§ˆå™¨è®¿é—®çš„åœ°å€æ˜¯ï¼š<code>192.168.33.10</code>ã€‚<br>å‡å¦‚ä½ è¿™é‡Œæ­£å¸¸ï¼Œç„¶åè¿˜éœ€è¦çœ‹ä¸‹æ˜¯å¦æ˜¯å½“å‰è™šæ‹Ÿæœºçš„é˜²ç«å¢™é˜»æ­¢äº†80ç«¯å£çš„è®¿é—®ï¼Œå¯ä»¥ä¿®æ”¹é˜²ç«å¢™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos6]:# /sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line">[root@centos6]:# service iptables save</span><br><span class="line">[root@centos6]:# service iptables restart</span><br></pre></td></tr></table></figure></p>
<p><strong>æ³¨æ„ï¼š</strong> é€šè¿‡ä½¿ç”¨./nginx -s reloadé‡å¯NginxæœåŠ¡å¦‚æœæŠ¥<code>nginx: [error] open() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (2: No such file or directory)é”™è¯¯ï¼Œè¿›åˆ°logsæ–‡ä»¶å‘ç°çš„ç¡®æ²¡æœ‰nginx.pidæ–‡ä»¶</code>ï¼Œå¯ä»¥ä½¿ç”¨nginx -cçš„å‚æ•°æŒ‡å®šnginx.confæ–‡ä»¶çš„ä½ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos6]:# /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/ä½¿ç”¨Vagrantã€Virtualboxå®‰è£…Centos 6è™šæ‹Ÿæœº/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/ä½¿ç”¨Vagrantã€Virtualboxå®‰è£…Centos 6è™šæ‹Ÿæœº/" itemprop="url">
                  ä½¿ç”¨Vagrantã€Virtualboxå®‰è£…Centos 6è™šæ‹Ÿæœº
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-06-11 00:00:00" itemprop="dateCreated datePublished" datetime="2018-06-11T00:00:00+08:00">2018-06-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2018-06-12 19:43:08" itemprop="dateModified" datetime="2018-06-12T19:43:08+08:00">2018-06-12</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å·¥å…·/" itemprop="url" rel="index"><span itemprop="name">å·¥å…·</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h3><p>å¯¹äºå‰ç«¯æ¥è®²ï¼Œé€šè¿‡nodeå°±å¯ä»¥å¾ˆå¿«çš„å¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡ã€‚ä½†æ˜¯å—é™äºå…¬ç½‘ç¯å¢ƒï¼Œå›½å†…çš„æœåŠ¡æä¾›å•†æä¾›çš„nodeç¯å¢ƒä»¥åŠMongoDBæœåŠ¡ä»·æ ¼å¤ªé«˜ï¼Œä¸å¾—ä¸è½¬å‘æ”¯æŒPHPçš„æœåŠ¡å™¨ã€‚æ²¡åŠæ³•ï¼Œåªå¾—æ’¸èµ·è¢–å­ç phpäº†ã€‚</p>
<p>è¦åœ¨æœ¬åœ°ç¯å¢ƒè·‘phpï¼Œéœ€è¦å®‰è£…é›†æˆç¯å¢ƒæˆ–è€…é€šè¿‡è™šæ‹Ÿæœºæ¥æ­å»ºphpç¯å¢ƒã€‚è¿™é‡Œæˆ‘é€‰æ‹©äº†ä½¿ç”¨Vagrant+Virtualboxæ¥æ­å»ºPHPç¯å¢ƒã€‚</p>
<h3 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h3><ul>
<li><a href="https://www.vagrantup.com/">Vagrant</a></li>
<li><a href="https://app.vagrantup.com/boxes/search">VirtualBox</a></li>
</ul>
<p>å…ˆå»ä¸‹è½½å¹¶å®‰è£…Vagrantå’ŒVirtualBoxï¼Œå®‰è£…å¥½äº†ä¹‹åæˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æˆåŠŸå®‰è£…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vagrant -v</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœå‡ºç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vagrant 2.1.1</span><br></pre></td></tr></table></figure></p>
<p>åˆ™è¡¨ç¤ºVagrant å·²ç»å®‰è£…æˆåŠŸäº†ã€‚</p>
<p>ä¹‹åå»æˆ‘ä»¬å»<a href="https://app.vagrantup.com/boxes/search">Vagrant Cloud</a>æœç´¢è¦è£…ç³»ç»Ÿï¼ˆboxé•œåƒï¼‰ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯<strong>scalefactory/centos6</strong>ã€‚</p>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><h4 id="1ã€init"><a href="#1ã€init" class="headerlink" title="1ã€init"></a>1ã€init</h4><p>æ–°å»ºä¸€ä¸ªç›®å½• - Vagrantï¼Œå¹¶é€šè¿‡Vagrant initåˆå§‹åŒ–ä¸€ä¸ªè™šæ‹Ÿæœºé¡¹ç›®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir Vagrant &amp;&amp; cd Vagrant</span><br><span class="line">$ vagrant init scalefactory/centos6</span><br></pre></td></tr></table></figure></p>
<p>ä¸€å †çš„è¾“å‡ºä¹‹åï¼Œä¼šçœ‹åˆ°Vagrantç›®å½•ä¸‹é¢å¤šäº†ä¸€ä¸ªVagrantfileçš„æ–‡ä»¶ã€‚ä½ å¯ä»¥æ‰“å¼€è¯¥æ–‡ä»¶çœ‹çœ‹é‡Œé¢çš„å†…å®¹ã€‚è¿™é‡Œé‡ç‚¹ç½—åˆ—ä¸‰ä¸ªç‚¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Every Vagrant development environment requires a box. You can search for</span><br><span class="line"># boxes at https://vagrantcloud.com/search.</span><br><span class="line"># è¿™é‡ŒæŒ‡æ˜è™šæ‹Ÿé•œåƒæ–‡ä»¶ï¼Œæ‰¾ä¸åˆ°æœ¬åœ°çš„ï¼Œåˆ™ä¼šå»https://vagrantcloud.com/searchä¸‹è½½</span><br><span class="line">config.vm.box = &quot;scalefactory/centos6&quot;</span><br><span class="line"></span><br><span class="line"># Create a private network, which allows host-only access to the machine</span><br><span class="line"># using a specific IP.</span><br><span class="line"># æœ¬æœºå’Œè™šæ‹Ÿæœºçš„è¿æ¥æ–¹å¼</span><br><span class="line">config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;</span><br><span class="line"></span><br><span class="line"># Share an additional folder to the guest VM. The first argument is</span><br><span class="line"># the path on the host to the actual folder. The second argument is</span><br><span class="line"># the path on the guest to mount the folder. And the optional third</span><br><span class="line"># argument is a set of non-required options.</span><br><span class="line"># æœ¬åœ°ç›®å½•å’Œè™šæ‹Ÿæœºçš„æŒ‚è½½è·¯å¾„ï¼ˆæ˜ å°„ï¼‰</span><br><span class="line"># config.vm.synced_folder &quot;../data&quot;, &quot;/vagrant_data&quot;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><a href="https://puphpet.com/">Puphpet</a>æ˜¯ä¸€ä¸ªå‰ç«¯UIå·¥å…·ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥é…ç½®ä½ çš„è™šæ‹Ÿæœºé¡¹ç›®ï¼Œå¹¶ç”ŸæˆVagrantæ–‡ä»¶</p>
</blockquote>
<h4 id="2ã€up"><a href="#2ã€up" class="headerlink" title="2ã€up"></a>2ã€up</h4><p>initä¹‹åï¼Œä½¿ç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Vagrant up [name]</span><br></pre></td></tr></table></figure></p>
<p>æ¥å¯åŠ¨å®‰è£…ï¼ˆç¬¬ä¸€æ¬¡upçš„æ—¶å€™æ˜¯å¯åŠ¨å®‰è£…ï¼Œå®‰è£…å®Œä¹‹åä¼šç›´æ¥å¯åŠ¨è™šæ‹Ÿæœºï¼‰ã€‚<br>è¿™é‡Œä¼šå…ˆå»ä¸‹è½½boxï¼Œæ—¶é—´ä¼šæœ‰ç‚¹é•¿ï¼Œç­‰åˆ°ä¸€æ®µä¿¡æ¯è¾“å‡ºåï¼Œä¼šçœ‹åˆ°readyçš„æç¤ºï¼Œè¡¨ç¤ºè™šæ‹Ÿæœºå·²ç»å®‰è£…æˆåŠŸäº†ã€‚</p>
<h4 id="3ã€ssh"><a href="#3ã€ssh" class="headerlink" title="3ã€ssh"></a>3ã€ssh</h4><p>è™šæ‹Ÿæœºå¯åŠ¨åï¼Œé€šè¿‡sshå‘½ä»¤å¯ä»¥ç™»å½•åˆ°è™šæ‹Ÿæœºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vagrant ssh</span><br></pre></td></tr></table></figure></p>
<p>è¿›å…¥è™šæ‹Ÿæœºç³»ç»Ÿæ‰€ä½¿ç”¨çš„è´¦å·å¯†ç é»˜è®¤éƒ½æ˜¯<strong>vagrant</strong>ã€‚å› ä¸ºåæœŸè¦åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…phpã€nginxç­‰å·¥å…·ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åˆ‡æ¢æˆrootè´¦å·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$[vagrant@centos6]: su</span><br><span class="line">è¾“å…¥æ–°å¯†ç ï¼š</span><br><span class="line">å†æ¬¡è¾“å…¥æ–°å¯†ç ï¼š</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œçš„å¯†ç è¦ç¬¦åˆLinuxçš„å¯†ç è§„èŒƒï¼šå¿…é¡»åŒ…å«å¤§å°å†™å’Œç‰¹æ®Šå­—ç¬¦åŠæ•°å­—ã€‚</p>
<h4 id="4ã€halt"><a href="#4ã€halt" class="headerlink" title="4ã€halt"></a>4ã€halt</h4><p>å½“ä¸ä½¿ç”¨è™šæ‹Ÿæœºçš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨<strong>halt</strong>å‘½ä»¤å¯ä»¥å°†è™šæ‹ŸæœºæŒ‚èµ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vagrant halt</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>æ›´å¤švagrantçš„å‘½ä»¤ï¼Œå¯ç‚¹å‡»è¿™é‡Œ<a href="https://www.vagrantup.com/docs/index.html">å‚è€ƒå®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -ç»„ä»¶é€šä¿¡/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -ç»„ä»¶é€šä¿¡/" itemprop="url">
                  å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -ç»„ä»¶é€šä¿¡
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-06-08 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š18:28:39" itemprop="dateCreated datePublished" datetime="2018-06-08T00:00:00+08:00">2018-06-08</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å‰ç«¯/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>wepyæä¾›äº†<strong>$broadcast</strong>ã€<strong>$emit</strong>ã€<strong>$invoke</strong>ä¸‰ä¸ªæ–¹æ³•æ¥ä¸ºæˆ‘ä»¬å®ç°pageå’Œå­ç»„ä»¶æˆ–è€…ç»„ä»¶å’Œç»„ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<h3 id="broadcast"><a href="#broadcast" class="headerlink" title="$broadcast"></a>$broadcast</h3><p>pageé€šè¿‡$broadcastæ–¹æ³•å‘æ‰€æœ‰è¢«å¼•ç”¨çš„ç»„ä»¶å‘é€æŒ‡å®šå¹¿æ’­ï¼Œå­ç»„ä»¶å¦‚æœæœ‰éœ€è¦åˆ™åœ¨<strong>events</strong>é‡Œé¢è®¾ç½®æ¥æ”¶å™¨ç”¨æ¥æ¥æ”¶pageçš„å¹¿æ’­ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„äº‹ä»¶å¤„ç†ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">"changeText"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comA</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comB</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ComA <span class="keyword">from</span> <span class="string">'components/coma'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ComB <span class="keyword">from</span> <span class="string">'components/comb'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  components = &#123;</span></span><br><span class="line"><span class="undefined">    comA: ComA,</span></span><br><span class="line"><span class="undefined">    comB: ComB</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    changeText() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$broadcast(<span class="string">'com-changeText'</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- comA --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;text&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ComA</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  data = &#123;</span></span><br><span class="line"><span class="javascript">    text: <span class="string">'comA'</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  events = &#123;</span></span><br><span class="line"><span class="javascript">    <span class="string">'com-changeText'</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.text = <span class="string">'comAæ¥æ”¶åˆ°æ¥è‡ªçˆ¶çº§broadcastçš„å˜æ›´'</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$apply();</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- comB --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;text&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ComB</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  data = &#123;</span></span><br><span class="line"><span class="javascript">    text: <span class="string">'comB'</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  events = &#123;</span></span><br><span class="line"><span class="javascript">    <span class="string">'com-changeText'</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.text = <span class="string">'comAæ¥æ”¶åˆ°æ¥è‡ªçˆ¶çº§broadcastçš„å˜æ›´'</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$apply();</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="emit"><a href="#emit" class="headerlink" title="$emit"></a>$emit</h3><p>emitå’Œbroadcastæ­£å¥½ç›¸åï¼Œç”±å­ç»„ä»¶å‘æ‰€æœ‰å…¶çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯ï¼Œåªæœ‰å½“çˆ¶ç»„ä»¶çš„ <strong>events</strong> å†…è®¾ç½®äº†æ¥æ”¶æ–¹æ³•æ‰ä¼šç›¸åº”æ¥è‡ªå­ç»„ä»¶çš„å¹¿æ’­æ¶ˆæ¯å¹¶å¤„ç†å¯¹åº”çš„äº‹ä»¶ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;text&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comA</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ComA <span class="keyword">from</span> <span class="string">'components/coma'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  data = &#123;</span></span><br><span class="line"><span class="javascript">    text: <span class="string">'çˆ¶çº§åˆå§‹åŒ–å†…å®¹'</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  components = &#123;</span></span><br><span class="line"><span class="undefined">    comA: ComA</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  events = &#123;</span></span><br><span class="line"><span class="javascript">    changeText: <span class="function">(<span class="params">txt</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.text = txt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$apply();</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- comA --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">"changeText"</span>&gt;</span>comA<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ComA</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    changeText() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$emit(<span class="string">'changeText'</span>, <span class="string">'æˆ‘å°±è¦ä½ å˜'</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="invoke"><a href="#invoke" class="headerlink" title="$invoke"></a>$invoke</h3><p>invokeå¯ä»¥ç†è§£æˆç›´æ¥ä½¿ç”¨ï¼špageæˆ–è€…å­ç»„ä»¶å¯ä»¥ç›´æ¥æ‹¿åˆ°pageæˆ–è€…å­ç»„ä»¶ä¸­<strong>methods</strong>å†…å®šä¹‰çš„æ–¹æ³•ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> @<span class="attr">tap</span>=<span class="string">"getComaText"</span>&gt;</span>ç‚¹æˆ‘æ”¹å˜comAçš„å†…å®¹<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comA</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ComA <span class="keyword">from</span> <span class="string">'componnets/coma'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  components = &#123;</span></span><br><span class="line"><span class="undefined">    comA: ComA</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    getComaText() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$invoke(<span class="string">'comA'</span>, <span class="string">'changeText'</span>, <span class="string">'çˆ¶çº§é€šè¿‡invokeæ”¹å˜å­ç»„ä»¶å†…å®¹'</span>); <span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç»„ä»¶ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè°ƒç”¨çš„ç»„ä»¶çš„æŸä¸ªæ–¹æ³•ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºçœŸæ­£çš„ä¼ å‚</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- comA --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;content&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ComA</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  data = &#123;</span></span><br><span class="line"><span class="javascript">    content: <span class="string">'åˆå§‹åŒ–å­å†…å®¹'</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    changeText(txt) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.content = txt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$apply();</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>åœ¨ç»„ä»¶é€šä¿¡ä¸­ï¼Œä¸€å®šè¦ç†è§£æ‰€è°ƒç”¨çš„æ–¹æ³•æ˜¯åœ¨å“ªä¸ªé‡Œé¢å®šä¹‰çš„ï¼šbroadcashã€emitæ‰€å¤„ç†çš„äº‹ä»¶éœ€è¦åœ¨ eventsé‡Œé¢å®šä¹‰ï¼Œå¦‚æœemitè°ƒç”¨çš„æ˜¯è‡ªå®šä¹‰äº‹ä»¶ï¼Œåˆ™è‡ªå®šä¹‰äº‹ä»¶éœ€è¦åœ¨ methods é‡Œé¢æœ‰å®šä¹‰ã€‚è€Œinvokeæ˜¯ç›´æ¥è°ƒç”¨methodsé‡Œé¢çš„æ–¹æ³•ã€‚</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -æ•°æ®ç»‘å®š/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -æ•°æ®ç»‘å®š/" itemprop="url">
                  å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -æ•°æ®ç»‘å®š
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-06-08 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š18:29:15" itemprop="dateCreated datePublished" datetime="2018-06-08T00:00:00+08:00">2018-06-08</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å‰ç«¯/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨å°ç¨‹åºåŸç”Ÿå¼€å‘é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <strong>this.setData({})</strong> æ¥è®¾ç½®æ“ä½œdataæ•°æ®ï¼Œè€Œwepyä¸­å°†è¯¥æ“ä½œè¿›è¡Œäº†å°è£…ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ <strong>this.dataName</strong> æ¥å®ç°dataæ•°æ®çš„èµ‹å€¼æˆ–å˜æ›´ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">"change"</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  data = &#123;</span></span><br><span class="line"><span class="javascript">    title: <span class="string">'åˆå§‹åŒ–å†…å®¹'</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    change() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.title = <span class="string">'æ”¹å˜å†…å®¹'</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„æ —å­é‡Œï¼Œæˆ‘ä»¬é€šè¿‡changeæ–¹æ³•æ¥æ”¹å˜ title çš„å€¼ - å¯ä»¥çœ‹åˆ°å¹¶æ²¡æœ‰ä½¿ç”¨ setData æ¥æ“ä½œã€‚</p>
<p><strong>é‡è¦ï¼š</strong> åœ¨å¼‚æ­¥æ–¹æ³•é‡Œé¢éœ€è¦ä½¿ç”¨ <strong>this.$apply()</strong> æ¥å¯åŠ¨è„æ•°æ®æ£€æŸ¥è¾¾åˆ°æ›´æ–°dataçš„ç›®çš„ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">"change"</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  data = &#123;</span></span><br><span class="line"><span class="javascript">    title: <span class="string">'åˆå§‹åŒ–å†…å®¹'</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    change() &#123;</span></span><br><span class="line"><span class="javascript">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.title = <span class="string">'è¢«å¼‚æ­¥æ”¹å˜äº†'</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$apply();</span></span><br><span class="line"><span class="undefined">      &#125;, 1000);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="ä¼ å‚ä¼˜åŒ–"><a href="#ä¼ å‚ä¼˜åŒ–" class="headerlink" title="ä¼ å‚ä¼˜åŒ–"></a>ä¼ å‚ä¼˜åŒ–</h3><p>åœ¨åŸç”Ÿå¼€å‘ä¸­è¦è·å–å‚æ•°çš„è¯ï¼Œåªèƒ½åœ¨å…ƒç´ ä¸Šæ·»åŠ data-å±æ€§ã€‚è€Œwepyå¸¦æ¥çš„å˜åŒ–åˆ™æ˜¯å¯ä»¥ç›´æ¥åœ¨ç»‘å®šçš„äº‹ä»¶æ˜¯å†™å…¥å‚æ•°ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">"change(&#123;&#123;title&#125;&#125;)"</span>&gt;</span>&#123;&#123;content&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  data = &#123;</span></span><br><span class="line"><span class="javascript">    title: <span class="string">'æ ‡é¢˜å†…å®¹'</span>,</span></span><br><span class="line"><span class="javascript">    content: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    change(txt) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.content = txt;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -Propsä¼ å€¼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -Propsä¼ å€¼/" itemprop="url">
                  å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -Propsä¼ å€¼
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-06-07 00:00:00" itemprop="dateCreated datePublished" datetime="2018-06-07T00:00:00+08:00">2018-06-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2018-06-08 14:09:40" itemprop="dateModified" datetime="2018-06-08T14:09:40+08:00">2018-06-08</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å‰ç«¯/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Propsæ˜¯pageå’Œç»„ä»¶ï¼Œç»„ä»¶å’Œç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®çš„åª’ä»‹ï¼Œä¸ä»…æ˜¯æ•°æ®ï¼Œè¿˜å¯ä»¥æ˜¯è‡ªå®šä¹‰äº‹ä»¶ï¼ˆæ–¹æ³•ï¼‰ã€‚</p>
<h3 id="é™æ€å€¼"><a href="#é™æ€å€¼" class="headerlink" title="é™æ€å€¼"></a>é™æ€å€¼</h3><p>é™æ€å€¼å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå›ºå®šä¸å˜çš„å€¼ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- component --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Com</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  props = &#123;</span></span><br><span class="line"><span class="javascript">    title: <span class="built_in">String</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  data = &#123;&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">com</span> <span class="attr">title</span>=<span class="string">"å¸¸é‡å€¼"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Com <span class="keyword">from</span> <span class="string">'components/com'</span>;  <span class="comment">// å¼•å…¥comç»„ä»¶</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  components = &#123;</span></span><br><span class="line"><span class="undefined">    com: Com</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="åŠ¨æ€å€¼"><a href="#åŠ¨æ€å€¼" class="headerlink" title="åŠ¨æ€å€¼"></a>åŠ¨æ€å€¼</h3><p>Propsä¼ é€’åŠ¨æ€å€¼æ—¶é€šè¿‡ä½¿ç”¨ <strong>:propsName</strong> ï¼ˆç±»ä¼¼Vueä¸­çš„v-bind:propsNameï¼‰æ¥ç»‘å®šåŠ¨æ€çš„æ•°æ®ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- component --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ComA</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  props = &#123;</span></span><br><span class="line"><span class="javascript">    title: <span class="built_in">String</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  data = &#123;&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comA</span> <span class="attr">:title</span>=<span class="string">"getTitle"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ComA <span class="keyword">from</span> <span class="string">'components/coma'</span>;  <span class="comment">// å¼•å…¥comç»„ä»¶</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  components = &#123;</span></span><br><span class="line"><span class="undefined">    comA: ComA</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  data = &#123;&#125;;</span></span><br><span class="line"><span class="undefined">  computed = &#123;</span></span><br><span class="line"><span class="undefined">    getTitle() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="string">'å˜åŒ–çš„å€¼'</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="PropsåŒå‘æ•°æ®ç»‘å®š"><a href="#PropsåŒå‘æ•°æ®ç»‘å®š" class="headerlink" title="PropsåŒå‘æ•°æ®ç»‘å®š"></a>PropsåŒå‘æ•°æ®ç»‘å®š</h3><p>åœ¨ä¼ é€’çš„æ—¶å€™åŠ ä¸Š <strong>sync</strong> ä¿®é¥°ï¼Œå¹¶åœ¨å­ç»„ä»¶çš„propsé‡Œé¢è®¾ç½® <strong>twoWay: true</strong>ã€‚<br>çœ‹æ —å­ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- component --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> @<span class="attr">tap</span>=<span class="string">"changeTitle"</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ComA</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  props = &#123;</span></span><br><span class="line"><span class="undefined">    title: &#123;</span></span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">      twoWay: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  data = &#123;&#125;;</span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    changeTitle() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.title = <span class="string">'æ¥è‡ªç»„ä»¶çš„ä¿®æ”¹åçš„title'</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$apply();</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comA</span> <span class="attr">:title.sync</span>=<span class="string">"title"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ComA <span class="keyword">from</span> <span class="string">'components/coma'</span>;  <span class="comment">// å¼•å…¥comç»„ä»¶</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  components = &#123;</span></span><br><span class="line"><span class="undefined">    comA: ComA</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">  data = &#123;</span></span><br><span class="line"><span class="javascript">    title: <span class="string">'æ¥è‡ªçˆ¶çº§çš„title'</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>å€¼å¾—æ³¨æ„</strong> propsä¼ é€’åŠ¨æ€å€¼æ˜¯è¦åœ¨å‰é¢ç”¨ <strong>:</strong> å·ï¼›å¦‚æœæ˜¯å¾ªç¯éå†ç»„ä»¶ï¼Œè¿™ä¸ªæ—¶å€™ç”¨çš„æ˜¯ <strong>repeat</strong> æ ‡ç­¾ï¼Œè€Œè¯¥æ ‡ç­¾å†…ä¸æ”¯æŒ props åŒå‘ç»‘å®šè¿™æ ·çš„æ“ä½œã€‚</p>
</blockquote>
<h3 id="è‡ªå®šä¹‰äº‹ä»¶"><a href="#è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="è‡ªå®šä¹‰äº‹ä»¶"></a>è‡ªå®šä¹‰äº‹ä»¶</h3><p>è‡ªå®šä¹‰äº‹ä»¶æ˜¯åœ¨<strong>methods</strong>é‡Œé¢å£°æ˜çš„ï¼Œåœ¨è¦ä½¿ç”¨çš„åœ°æ–¹é€šè¿‡<strong>@.propsName.user=â€customEventâ€æ¥å‘å­ç»„ä»¶è¿›è¡Œäº‹ä»¶ä¼ é€’ã€‚ç„¶åç»„ä»¶åˆ™é€šè¿‡</strong>$emit**æ¥å¤„ç†è¯¥äº‹ä»¶ã€‚</p>
<ul>
<li><strong>@</strong>ä¸ºä¿®é¥°ç¬¦ï¼ŒæŒ‡äº‹ä»¶ï¼›</li>
<li><strong>propsName</strong>ä¸ºå‘å­ç»„ä»¶ä¼ é€’çš„è‡ªå®šä¹‰äº‹ä»¶åç§°ï¼Œç›¸å½“äºç»™è‡ªå®šä¹‰äº‹ä»¶å–ä¸ªåˆ«åï¼Œå¹¶åœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨è¯¥åˆ«åï¼›</li>
<li><strong>user</strong>ä¸ºåç¼€ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸ªè‡ªå®šä¹‰äº‹ä»¶ã€‚</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;text&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comA</span> @<span class="attr">get.user</span>=<span class="string">"getText"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ComA <span class="keyword">from</span> <span class="string">'components/coma'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">  data = &#123;</span></span><br><span class="line"><span class="javascript">    text: <span class="string">'åˆå§‹å†…å®¹'</span></span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    getText(txt) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.text = txt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$apply();</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- comA --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">"change"</span>&gt;</span>comA<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  methods = &#123;</span></span><br><span class="line"><span class="undefined">    change() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$emit(<span class="string">'get'</span>, <span class="string">'æ¥è‡ªcomAçš„é—®å€™'</span>);  <span class="comment">// getæ˜¯åœ¨å­ç»„ä»¶ä¸Šå®šä¹‰çš„è‡ªå®šä¹‰æ–¹æ³•åç§°ï¼Œå¯¹åº”çš„æ˜¯çˆ¶ç»„ä»¶çš„ getText æ–¹æ³•</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -é¡µé¢å’Œç»„ä»¶çš„å†™æ³•/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -é¡µé¢å’Œç»„ä»¶çš„å†™æ³•/" itemprop="url">
                  å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -é¡µé¢å’Œç»„ä»¶çš„å†™æ³•
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-06-06 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š17:23:00" itemprop="dateCreated datePublished" datetime="2018-06-06T00:00:00+08:00">2018-06-06</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å‰ç«¯/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1ã€å°ç¨‹åºå…¥å£appç»§æ‰¿wepy-app"><a href="#1ã€å°ç¨‹åºå…¥å£appç»§æ‰¿wepy-app" class="headerlink" title="1ã€å°ç¨‹åºå…¥å£appç»§æ‰¿wepy.app:"></a>1ã€å°ç¨‹åºå…¥å£appç»§æ‰¿wepy.app:</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App extends wepy.app &#123;</span><br><span class="line">  customData = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  customFunction ()ã€€&#123; &#125;</span><br><span class="line"></span><br><span class="line">  onLaunch () &#123;&#125;</span><br><span class="line"></span><br><span class="line">  onShow () &#123;&#125;</span><br><span class="line"></span><br><span class="line">  config = &#123;&#125;  <span class="comment">// å¯¹åº” app.json æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">  globalData = &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2ã€é¡µé¢pageç»§æ‰¿wepy-page"><a href="#2ã€é¡µé¢pageç»§æ‰¿wepy-page" class="headerlink" title="2ã€é¡µé¢pageç»§æ‰¿wepy.page:"></a>2ã€é¡µé¢pageç»§æ‰¿wepy.page:</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span><br><span class="line">  customData = &#123;&#125;  <span class="comment">// è‡ªå®šä¹‰æ•°æ®</span></span><br><span class="line"></span><br><span class="line">  customFunction ()ã€€&#123;&#125;  <span class="comment">//è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  onLoad () &#123;&#125;  <span class="comment">// åœ¨Pageå’ŒComponentå…±ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  onShow () &#123;&#125;  <span class="comment">// åªåœ¨Pageä¸­å­˜åœ¨çš„é¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  config = &#123;&#125;;  <span class="comment">// åªåœ¨Pageå®ä¾‹ä¸­å­˜åœ¨çš„é…ç½®æ•°æ®ï¼Œå¯¹åº”äºåŸç”Ÿçš„page.jsonæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">  data = &#123;&#125;;  <span class="comment">// é¡µé¢æ‰€éœ€æ•°æ®å‡éœ€åœ¨è¿™é‡Œå£°æ˜ï¼Œå¯ç”¨äºæ¨¡æ¿æ•°æ®ç»‘å®š</span></span><br><span class="line"></span><br><span class="line">  components = &#123;&#125;;  <span class="comment">// å£°æ˜é¡µé¢ä¸­æ‰€å¼•ç”¨çš„ç»„ä»¶ï¼Œæˆ–å£°æ˜ç»„ä»¶ä¸­æ‰€å¼•ç”¨çš„å­ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line">  mixins = [];  <span class="comment">// å£°æ˜é¡µé¢æ‰€å¼•ç”¨çš„Mixinå®ä¾‹</span></span><br><span class="line"></span><br><span class="line">  computed = &#123;&#125;;  <span class="comment">// å£°æ˜è®¡ç®—å±æ€§ï¼ˆè¯¦è§åæ–‡ä»‹ç»ï¼‰</span></span><br><span class="line"></span><br><span class="line">  watch = &#123;&#125;;  <span class="comment">// å£°æ˜æ•°æ®watcherï¼ˆè¯¦è§åæ–‡ä»‹ç»ï¼‰</span></span><br><span class="line"></span><br><span class="line">  methods = &#123;&#125;;  <span class="comment">// å£°æ˜é¡µé¢wxmlä¸­æ ‡ç­¾çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚æ³¨æ„ï¼Œæ­¤å¤„åªç”¨äºå£°æ˜é¡µé¢wxmlä¸­æ ‡ç­¾çš„bindã€catchäº‹ä»¶ï¼Œè‡ªå®šä¹‰æ–¹æ³•éœ€ä»¥è‡ªå®šä¹‰æ–¹æ³•çš„æ–¹å¼å£°æ˜</span></span><br><span class="line"></span><br><span class="line">  events = &#123;&#125;;  <span class="comment">// å£°æ˜ç»„ä»¶ä¹‹é—´çš„äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3ã€ç»„ä»¶ç»§æ‰¿wepy-component"><a href="#3ã€ç»„ä»¶ç»§æ‰¿wepy-component" class="headerlink" title="3ã€ç»„ä»¶ç»§æ‰¿wepy.component:"></a>3ã€ç»„ä»¶ç»§æ‰¿wepy.component:</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Com</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;</span><br><span class="line">   customData = &#123;&#125;  <span class="comment">// è‡ªå®šä¹‰æ•°æ®</span></span><br><span class="line"></span><br><span class="line">  customFunction ()ã€€&#123;&#125;  <span class="comment">//è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  onLoad () &#123;&#125;  <span class="comment">// åœ¨Pageå’ŒComponentå…±ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  onShow () &#123;&#125;  <span class="comment">// åªåœ¨Pageä¸­å­˜åœ¨çš„é¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  props = &#123;&#125;;  <span class="comment">// åªä»çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line">  data = &#123;&#125;;  <span class="comment">// é¡µé¢æ‰€éœ€æ•°æ®å‡éœ€åœ¨è¿™é‡Œå£°æ˜ï¼Œå¯ç”¨äºæ¨¡æ¿æ•°æ®ç»‘å®š</span></span><br><span class="line"></span><br><span class="line">  components = &#123;&#125;;  <span class="comment">// å£°æ˜é¡µé¢ä¸­æ‰€å¼•ç”¨çš„ç»„ä»¶ï¼Œæˆ–å£°æ˜ç»„ä»¶ä¸­æ‰€å¼•ç”¨çš„å­ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line">  mixins = [];  <span class="comment">// å£°æ˜é¡µé¢æ‰€å¼•ç”¨çš„Mixinå®ä¾‹</span></span><br><span class="line"></span><br><span class="line">  computed = &#123;&#125;;  <span class="comment">// å£°æ˜è®¡ç®—å±æ€§ï¼ˆè¯¦è§åæ–‡ä»‹ç»ï¼‰</span></span><br><span class="line"></span><br><span class="line">  watch = &#123;&#125;;  <span class="comment">// å£°æ˜æ•°æ®watcherï¼ˆè¯¦è§åæ–‡ä»‹ç»ï¼‰</span></span><br><span class="line"></span><br><span class="line">  methods = &#123;&#125;;  <span class="comment">// å£°æ˜é¡µé¢wxmlä¸­æ ‡ç­¾çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚æ³¨æ„ï¼Œæ­¤å¤„åªç”¨äºå£°æ˜é¡µé¢wxmlä¸­æ ‡ç­¾çš„bindã€catchäº‹ä»¶ï¼Œè‡ªå®šä¹‰æ–¹æ³•éœ€ä»¥è‡ªå®šä¹‰æ–¹æ³•çš„æ–¹å¼å£°æ˜</span></span><br><span class="line"></span><br><span class="line">  events = &#123;&#125;;  <span class="comment">// å£°æ˜ç»„ä»¶ä¹‹é—´çš„äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4ã€mixinç»§æ‰¿wepy-mixin"><a href="#4ã€mixinç»§æ‰¿wepy-mixin" class="headerlink" title="4ã€mixinç»§æ‰¿wepy.mixin:"></a>4ã€mixinç»§æ‰¿wepy.mixin:</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Min</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">mixin</span> </span>&#123;</span><br><span class="line">  customData = &#123;&#125;  <span class="comment">// è‡ªå®šä¹‰æ•°æ®</span></span><br><span class="line"></span><br><span class="line">  customFunction ()ã€€&#123;&#125;  <span class="comment">//è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  onLoad () &#123;&#125;  <span class="comment">// åœ¨Pageå’ŒComponentå…±ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  onShow () &#123;&#125;  <span class="comment">// åªåœ¨Pageä¸­å­˜åœ¨çš„é¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  data = &#123;&#125;;  <span class="comment">// é¡µé¢æ‰€éœ€æ•°æ®å‡éœ€åœ¨è¿™é‡Œå£°æ˜ï¼Œå¯ç”¨äºæ¨¡æ¿æ•°æ®ç»‘å®š</span></span><br><span class="line"></span><br><span class="line">  methods = &#123;&#125;;  <span class="comment">// å£°æ˜é¡µé¢wxmlä¸­æ ‡ç­¾çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚æ³¨æ„ï¼Œæ­¤å¤„åªç”¨äºå£°æ˜é¡µé¢wxmlä¸­æ ‡ç­¾çš„bindã€catchäº‹ä»¶ï¼Œè‡ªå®šä¹‰æ–¹æ³•éœ€ä»¥è‡ªå®šä¹‰æ–¹æ³•çš„æ–¹å¼å£°æ˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -èµ„æºå¼•ç”¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -èµ„æºå¼•ç”¨/" itemprop="url">
                  å¾®ä¿¡å°ç¨‹åºwepyæ¡†æ¶å­¦ä¹ -èµ„æºå¼•ç”¨
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-06-04 00:00:00" itemprop="dateCreated datePublished" datetime="2018-06-04T00:00:00+08:00">2018-06-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2018-06-07 12:46:50" itemprop="dateModified" datetime="2018-06-07T12:46:50+08:00">2018-06-07</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å‰ç«¯/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h3><p><a href="https://tencent.github.io/wepy/">wepy</a>æ˜¯ä»åŒäº‹é‚£å„¿å¬è¯´çš„ï¼Œä½†æ˜¯ä¸€ç›´æœªæœ‰å®é™…ä¸Šæ‰‹ï¼Œæœ€è¿‘æƒ³å†™ä¸€ä¸ªtodo-listçš„å°ç¨‹åºï¼Œæ‰€ä»¥é€‰æ‹©ç”¨wepyæ¥å°è¯•ã€‚<br>wepyæ˜¯è…¾è®¯ç³»å‡ºçš„ä¸€æ¬¾ä½¿å°ç¨‹åºæ”¯æŒç»„ä»¶åŒ–å¼€å‘çš„æ¡†æ¶ã€‚å®ƒåœ¨å†™æ³•å’Œä½¿ç”¨ä¸Šå‚ç…§çš„æ˜¯<a href="https://cn.vuejs.org/">Vue</a>ï¼Œæ‰€ä»¥ä¸ç†Ÿæ‚‰Vueçš„åŒå­¦éœ€è¦å…ˆå»è¡¥ä¹ ä¸€ä¸‹ã€‚</p>
<hr>
<p>å‰ç«¯å¯¹èµ„æºçš„å¼•ç”¨æ— éå°±æ˜¯æ ·å¼ã€å›¾ç‰‡ã€è„šæœ¬ã€‚è€Œåœ¨wepyé‡Œé¢ç»„ä»¶ã€è„šæœ¬ã€å›¾ç‰‡æ˜¯æˆ‘ä»¬éœ€è¦å¼•å…¥çš„èµ„æºã€‚å¯¹äºè¿™äº›èµ„æºçš„å¼•ç”¨å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿ</p>
<h3 id="1ã€ç¼–è¯‘æ–‡ä»¶å†…é…ç½®åˆ«å"><a href="#1ã€ç¼–è¯‘æ–‡ä»¶å†…é…ç½®åˆ«å" class="headerlink" title="1ã€ç¼–è¯‘æ–‡ä»¶å†…é…ç½®åˆ«å"></a>1ã€ç¼–è¯‘æ–‡ä»¶å†…é…ç½®åˆ«å</h3><p>åœ¨<strong>wepy.config.js</strong>å†…è®¾ç½®resolveçš„aliasï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  alias: &#123;</span><br><span class="line">    <span class="string">'@'</span>: path.join(__dirname, <span class="string">'src'</span>),</span><br><span class="line">    <span class="string">'components'</span>: path.join(__dirname, <span class="string">'src/components'</span>),</span><br><span class="line">    <span class="string">'images'</span>: path.join(__dirname, <span class="string">'src/images'</span>),</span><br><span class="line">    <span class="string">'utils'</span>: path.join(__dirname, <span class="string">'src/utils'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2ã€å›¾ç‰‡èµ„æºçš„å¼•ç”¨"><a href="#2ã€å›¾ç‰‡èµ„æºçš„å¼•ç”¨" class="headerlink" title="2ã€å›¾ç‰‡èµ„æºçš„å¼•ç”¨"></a>2ã€å›¾ç‰‡èµ„æºçš„å¼•ç”¨</h3><p>å¦‚ä¸Šä»£ç é‡Œé¢ï¼Œæˆ‘ä»¬çš„ <strong>images</strong> æ˜¯ <strong>src</strong> ç›®å½•çš„ç›´æ¥å­çº§ã€‚åœ¨é¡µé¢æˆ–è€…ç»„ä»¶é‡Œé¢æˆ‘ä»¬åˆ™è¿™æ ·å¼•ç”¨ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"/images/**.png"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="3ã€ç»„ä»¶çš„å¼•ç”¨"><a href="#3ã€ç»„ä»¶çš„å¼•ç”¨" class="headerlink" title="3ã€ç»„ä»¶çš„å¼•ç”¨"></a>3ã€ç»„ä»¶çš„å¼•ç”¨</h3><p>åœ¨pageæˆ–è€…ç»„ä»¶å†…å¼•ç”¨ç»„ä»¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ <strong>import</strong> å¯¼å…¥ï¼Œå¹¶ä¸”ä¸€å®šè¦åœ¨pageæˆ–è€…ç»„ä»¶çš„ <strong>components</strong> ä¸Šåšæ˜ å°„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"><span class="keyword">import</span> CustomA <span class="keyword">from</span> <span class="string">'components/customa'</span>;</span><br><span class="line"><span class="keyword">import</span> CustomB <span class="keyword">from</span> <span class="string">'components/customb'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Index extends wepy.page &#123;</span><br><span class="line">  components = &#123;</span><br><span class="line">    customA: CustomA,</span><br><span class="line">    customA1: CustomA,</span><br><span class="line">    customB: CustomB</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ˜ å°„å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬åœ¨ <strong>template</strong> é‡Œé¢å°±å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">customA</span>&gt;</span><span class="tag">&lt;/<span class="name">customA</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">customB</span>&gt;</span><span class="tag">&lt;/<span class="name">customB</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">customA1</span>&gt;</span><span class="tag">&lt;/<span class="name">customA1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ­£å¦‚ä¸Šé¢ä»£ç é‡Œé¢ä½ æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬çš„ç»„ä»¶ <strong>CustomA</strong> æ˜ å°„æˆäº†ä¸¤ä¸ªç»„ä»¶ï¼šcustomAå’ŒcustomA1ã€‚è¿™æ ·åšå¥½å¤„åœ¨äºï¼šæˆ‘ä»¬å¯ä»¥å…±ç”¨åŒä¸€ä¸ªç»„ä»¶ï¼Œä½†æ•°æ®å´æ˜¯äº’ä¸å½±å“çš„ã€‚</p>
<p><strong>é‡è¦ï¼ï¼ï¼</strong> ç»„ä»¶åç§°å¦‚æœæœ‰é©¼å³°å†™æ³•çš„ï¼Œåˆ™åœ¨wxmlä¸­éœ€æŒ‰ç…§é©¼å³°æ–¹å¼ä½¿ç”¨ç»„ä»¶ï¼Œè€ŒéåƒVueä¸€æ ·éœ€è¦å°†é©¼å³°è½¬ä¸º - è¿å­—ç¬¦ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.wpy --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- template --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é”™è¯¯å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">task-item</span> <span class="attr">:list</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;/<span class="name">task-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ­£ç¡®å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">taskItem</span> <span class="attr">:list</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;/<span class="name">taskItem</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.wpy</span></span><br><span class="line"><span class="comment">/** js */</span></span><br><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"><span class="keyword">import</span> taskItem <span class="keyword">from</span> <span class="string">'@/compnoents/task-item'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span><br><span class="line">  components = &#123;</span><br><span class="line">    taskItem: taskItem</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4ã€å…¬å…±jsæ–¹æ³•çš„å¼•ç”¨"><a href="#4ã€å…¬å…±jsæ–¹æ³•çš„å¼•ç”¨" class="headerlink" title="4ã€å…¬å…±jsæ–¹æ³•çš„å¼•ç”¨"></a>4ã€å…¬å…±jsæ–¹æ³•çš„å¼•ç”¨</h3><p>åšé¡¹ç›®çš„æ—¶å€™æ¶‰åŠåˆ°çš„å…¬å…±æˆ–è€…å¯å¤ç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä»¬éƒ½ä¼šæ•´ç†åˆ° <strong>utils</strong> ä¸‹é¢ï¼Œåœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹å† <strong>import</strong> è¿›æ¥å°±å¥½äº†ã€‚å¦‚ç¬¬ä¸€éƒ¨åˆ†çš„ä»£ç ï¼Œæˆ‘ä»¬è®¾ç½®äº†åˆ«å <strong>utils</strong>ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥åœ¨pageæˆ–è€…ç»„ä»¶å†…è¿™æ ·å¼•ç”¨å’Œä½¿ç”¨ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">'wepy'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; customEvent &#125; = <span class="string">'utils'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Index extends wepy.page &#123;</span><br><span class="line">  onLoad () &#123;</span><br><span class="line">    customEvent();  <span class="comment">// ä½¿ç”¨å…¬å…±æ–¹æ³•(å¯ä»¥åœ¨ä»»æ„åœ°æ–¹è°ƒç”¨è‡ªå®šä¹‰æ–¹æ³•ï¼Œè¿™é‡Œåªæ˜¯æ —å­)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/ä½¿ç”¨bcryptåŠ å¯†ç”¨æˆ·å¯†ç å¹¶å®ç°ç™»å½•éªŒè¯/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸˆçŒ«è¢«è°ƒæˆäº†">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/ä½¿ç”¨bcryptåŠ å¯†ç”¨æˆ·å¯†ç å¹¶å®ç°ç™»å½•éªŒè¯/" itemprop="url">
                  ä½¿ç”¨bcryptåŠ å¯†ç”¨æˆ·å¯†ç å¹¶å®ç°ç™»å½•éªŒè¯
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-04-28 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š10:29:51" itemprop="dateCreated datePublished" datetime="2018-04-28T00:00:00+08:00">2018-04-28</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å‰ç«¯/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ•°æ®åŠ å¯†æ˜¯ä¸ºäº†è®©ç”¨æˆ·æ•°æ®å¾—åˆ°æœ‰æ•ˆå¹¶ä¸”å¯é çš„ä¿éšœï¼Œæˆ‘æƒ³è°éƒ½ä¸å¸Œæœ›è‡ªå·±çš„é“¶è¡Œå–æ¬¾å¯†ç è¢«åˆ«äººçŸ¥é“å§ï¼Ÿåœ¨NodeæœåŠ¡ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨Bcryptè¿™ä¸ªæ¨¡å—æ¥ç»™æˆ‘ä»¬çš„ç”¨æˆ·æ•æ„Ÿä¿¡æ¯åšåŠ å¯†å’Œæ ¡éªŒã€‚ä¸‹é¢ä»¥ç”¨æˆ·æ³¨å†Œå’Œç™»å½•æ¥è¯´è¯´bcryptçš„ä½¿ç”¨ã€‚</p>
<h3 id="å®‰è£…æ¨¡å—"><a href="#å®‰è£…æ¨¡å—" class="headerlink" title="å®‰è£…æ¨¡å—"></a>å®‰è£…æ¨¡å—</h3><p>æˆ‘ä»¬å…ˆæ¥æŠŠåŸºæœ¬çš„ç¯å¢ƒæ­å¥½ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add koa koa-router monk bcrypt</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘è¿™é‡Œæ˜¯ä¸€æ¬¡æ€§å®‰è£…æ‰€éœ€çš„ä¾èµ–æ¨¡å—ï¼Œmonkæ˜¯ç”¨æ¥è¿æ¥MongoDBçš„ã€‚</p>
<h3 id="åˆ›å»ºæœåŠ¡"><a href="#åˆ›å»ºæœåŠ¡" class="headerlink" title="åˆ›å»ºæœåŠ¡"></a>åˆ›å»ºæœåŠ¡</h3><p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæœåŠ¡ - app.js:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>);</span><br><span class="line"><span class="keyword">const</span> Server = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">'./routes'</span>);</span><br><span class="line"></span><br><span class="line">Server.use(Router.routes());</span><br><span class="line">Server.listen(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(chalk.cyan(<span class="string">`Server is running on port: 3000`</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>å†æ¥æ·»åŠ æˆ‘ä»¬è¦çš„apiè·¯ç”± routes.jsï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">'koa-router'</span>);</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router();</span><br><span class="line"><span class="keyword">const</span> &#123; validate, enbcrypt &#125; = <span class="built_in">require</span>(<span class="string">'./bcrypt'</span>);</span><br><span class="line">router.get(<span class="string">'/add'</span>, <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; username, password &#125; = ctx.params;</span><br><span class="line">    <span class="keyword">let</span> err = &#123;</span><br><span class="line">      code: <span class="string">'3000'</span>,</span><br><span class="line">      info: <span class="string">''</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (!username) &#123;</span><br><span class="line">      err.info = <span class="string">'è´¦å·ä¸èƒ½ä¸ºç©º'</span>;</span><br><span class="line">      ctx.body = <span class="built_in">JSON</span>.stringify(err);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!password) &#123;</span><br><span class="line">      err.info = <span class="string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span>;</span><br><span class="line">      ctx.body = <span class="built_in">JSON</span>.stringify(err);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> AddUser(&#123;</span><br><span class="line">      username,</span><br><span class="line">      password: <span class="keyword">await</span> enbcrypt(password)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      ctx.body = <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">        code: <span class="string">'1000'</span>,</span><br><span class="line">        info: <span class="string">'æ·»åŠ æˆåŠŸ'</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      err.info = <span class="string">'æ·»åŠ å¤±è´¥'</span>;</span><br><span class="line">      ctx.body = JOSN.stringify(err);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">await</span> next();</span><br><span class="line">  &#125;).get(<span class="string">'/login'</span>, <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; username, password &#125; = ctx.params;</span><br><span class="line">    <span class="keyword">let</span> err = &#123;</span><br><span class="line">      code: <span class="string">'3000'</span>,</span><br><span class="line">      info: <span class="string">''</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (!username) &#123;</span><br><span class="line">      err.info = <span class="string">'è´¦å·ä¸èƒ½ä¸ºç©º'</span>;</span><br><span class="line">      ctx.body = <span class="built_in">JSON</span>.stringify(err);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!password) &#123;</span><br><span class="line">      err.info = <span class="string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span>;</span><br><span class="line">      ctx.body = <span class="built_in">JSON</span>.stringify(err);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> CheckUsnPsw(&#123; username &#125;).then(<span class="function"><span class="params">doc</span> =&gt;</span> &#123;</span><br><span class="line">      validate(password, doc).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="keyword">if</span> (res) &#123;</span><br><span class="line">          ctx.body = <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">            code: <span class="string">'1000'</span>,</span><br><span class="line">            info: <span class="string">'ç™»å½•æˆåŠŸ'</span></span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        err.info = <span class="string">'è´¦å·æˆ–å¯†ç é”™è¯¯'</span>;</span><br><span class="line">        ctx.body = <span class="built_in">JSON</span>.stringify(err);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      err.info = <span class="string">'è´¦å·æˆ–å¯†ç é”™è¯¯'</span>;</span><br><span class="line">      ctx.body = <span class="built_in">JSON</span>.stringify(err);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<ul>
<li>/addï¼šæ·»åŠ ç”¨æˆ·</li>
<li>/loginï¼šç”¨æˆ·ç™»å½•</li>
</ul>
<h3 id="å¤„ç†BcryptåŠ å¯†å’Œæ ¡éªŒ"><a href="#å¤„ç†BcryptåŠ å¯†å’Œæ ¡éªŒ" class="headerlink" title="å¤„ç†BcryptåŠ å¯†å’Œæ ¡éªŒ"></a>å¤„ç†BcryptåŠ å¯†å’Œæ ¡éªŒ</h3><p>å¦‚ä¸Šä»£ç é‡Œé¢æˆ‘ä»¬å…¶å®å·²ç»å¼•å…¥äº†bcryptè¿™ä¸ªæ¨¡å—äº†ï¼Œé‚£ç°åœ¨æˆ‘ä»¬æŠŠbcrypt.jså®Œå–„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">'bcrypt'</span>);</span><br><span class="line"><span class="keyword">const</span> saltRounds = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> enbcrypt = <span class="keyword">async</span> password =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> salt = <span class="keyword">await</span> bcrypt.genSaltSync(saltRounds);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> bcrypt.hashSync(password, salt);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> validate = <span class="keyword">async</span> (password, hash) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> bcrypt.compareSync(password, hash);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  enbcrypt,</span><br><span class="line">  validate</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="è¿æ¥MongoDB"><a href="#è¿æ¥MongoDB" class="headerlink" title="è¿æ¥MongoDB"></a>è¿æ¥MongoDB</h3><p>æˆ‘ä»¬ä½¿ç”¨monkå°†koaå’ŒMongoDBè¿›è¡Œè”é€šï¼Œå®ç°æ•°æ®çš„è¯»å†™æ“ä½œã€‚<br>å»ºä¸€ä¸ªmongo.js:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Mhost = <span class="string">'localhost:27017/local'</span>;</span><br><span class="line"><span class="keyword">const</span> db = <span class="built_in">require</span>(<span class="string">'monk'</span>)(Mhost);</span><br><span class="line"><span class="keyword">const</span> UserCollection = db.get(<span class="string">'users'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ç”¨æˆ·</span></span><br><span class="line"><span class="keyword">const</span> AddUser = <span class="function">(<span class="params">data = &#123;username: <span class="string">''</span>, password: <span class="string">''</span>&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> UserCollection.insert(&#123;<span class="attr">username</span>: data.username, <span class="attr">psw</span>: data.password&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    db.close();</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    db.close();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> CheckUsnPsw = <span class="function">(<span class="params">query = &#123; username: <span class="string">''</span> &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> UserCollection.findOne(&#123; <span class="attr">username</span>: query.username &#125;).then(<span class="function"><span class="params">doc</span> =&gt;</span> &#123;</span><br><span class="line">    db.close();</span><br><span class="line">    <span class="keyword">if</span> (doc) &#123;</span><br><span class="line">      <span class="keyword">return</span> doc.psw;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    db.close();</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„ç¨‹åºä¸šåŠ¡é€»è¾‘å·²ç»å†™å®Œäº†ã€‚ç„¶å<code>yarn start</code>æˆ–<code>npm start</code>é‡æ–°å¯åŠ¨æœåŠ¡ï¼<br>åœ¨æµè§ˆå™¨ç«¯å…ˆæ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost:3000/add?username=test&amp;password=123</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªå¦‚æœä¸šåŠ¡æ²¡é”™ï¼Œå°†æ˜¾ç¤ºæ·»åŠ æˆåŠŸã€‚</p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å»MongoDBæŸ¥è¯¢ä¸€ä¸‹è¯¥ç”¨æˆ·æ–‡æ¡£ï¼Œä¼šå‘ç°å¯†ç å­—æ®µæ˜¯ä¸€é•¿ä¸²è¢«åŠ å¯†åçš„å­—ç¬¦ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å†é€šè¿‡è®¿é—®<code>localhost:3000/login?username=test&amp;password=123</code>æ¥éªŒè¯ä¸€ä¸‹ç™»å½•æ˜¯å¦æˆåŠŸï¼Œä¹Ÿå°±æ˜¯æ ¡éªŒå¯†ç æ˜¯å¦æ­£ç¡®ã€‚<br>ä¸å‡ºæ„å¤–ï¼Œé¡µé¢åº”è¯¥æ˜¾ç¤ºç™»å½•æˆåŠŸï¼</p>
<blockquote>
<p>Bcryptçš„å®˜æ–¹æ–‡æ¡£<a href="https://github.com/kelektiv/node.bcrypt.js">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹</a></p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Frank</p>
              <p class="site-description motion-element" itemprop="description">è®°å½•å·¥ä½œã€ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">33</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">25</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Frank</span>

  

  
</div>




  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.5.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  





  










  
  <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({"theme":"forest","logLevel":5,"startOnLoad":true,"arrowMarkerAbsolute":false,"flowchart":{"htmlLabels":true,"useMaxWidth":true,"curve":"linear"},"sequence":{"diagramMarginX":50,"diagramMarginY":10,"actorMargin":50,"width":150,"height":65,"boxMargin":10,"boxTextMargin":5,"noteMargin":10,"messageMargin":35,"mirrorActors":true,"bottomMarginAdj":1,"useMaxWidth":true},"gantt":{"titleTopMargin":25,"barHeight":20,"barGap":4,"topPadding":50,"leftPadding":75,"gridLineStartPadding":35,"fontSize":11,"fontFamily":"\"Open-Sans\", \"sans-serif\"","numberSectionStyles":4,"axisFormat":"%Y-%m-%d"}});
    }
  </script>


  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
